* C:\users\lyam\Documents\University\S4\APP4\GitHub\s4-app4\spice\add3b_test.asc
XU1 o1 o2 o3 out Bin2Dec Vhigh={vv}
XU2 b N004 N005 N006 Dec2Bin Vhigh={vv}
XU3 a N001 N002 N003 Dec2Bin Vhigh={vv}
V1 vdd 0 1.8
Va a 0 3
Vb b 0 3
Vsel sel 0 1.8
XX1 vdd N001 N002 N003 N004 N005 N006 0 o1 o2 o3 cout 0 add3b params: ll={ll} wn={nnw} wp={nnw*mp}

* block symbol definitions
.subckt add3b vdd a1 a2 a3 b1 b2 b3 vss o1 o2 o3 cout cin
XX1 cin a1 b1 o1 N001 vdd vss add1b params: ll={ll} wn={nnw} wp={nnw*mp}
XX2 N001 a2 b2 o2 N002 vdd vss add1b params: ll={ll} wn={nnw} wp={nnw*mp}
XX3 N002 a3 b3 o3 cout vdd vss add1b params: ll={ll} wn={nnw} wp={nnw*mp}
.ends add3b

.subckt add1b cin a b s cout vss vdd
XX1 b N001 vss vdd a nand params: NAND wn={nnw} wp={nnw*mp} ll={ll}
XX2 cin N002 vss vdd N003 nand params: NAND wn={nnw} wp={nnw*mp} ll={ll}
XX3 b N003 vss vdd a xor params: XOR ll={ll} wn={nnw} wp={nnw*mp}
XX4 N002 cout vss vdd N001 nand params: NAND wn={nnw} wp={nnw*mp} ll={ll}
XX5 cin s vss vdd N003 xor params: XOR ll={ll} wn={nnw} wp={nnw*mp}
.ends add1b

.subckt nand in1 Q vdd vss in2
R2 vdd N002 1
M1 vdd in1 Q vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M2 Q in1 N005 vss NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M3 vdd in2 Q vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M4 N005 in2 vss vss NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
.lib BU_180nm.lib
.ends nand

.subckt xor in1 Q vdd vss in2
M9 Q in1 N006 vss NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M10 vdd N001 N003 vdd PMOS l={ll} w={wp*2} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M5 vdd N002 N004 vdd PMOS l={ll} w={wp*2} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M6 N003 in2 Q vdd PMOS l={ll} w={wp*2} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M7 N004 in1 Q vdd PMOS l={ll} w={wp*2} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M1 Q N005 N007 vss NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M2 N006 in2 vss vss NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M3 N007 N008 vss vss NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M4 vdd in1 N001 vdd PMOS l={ll} w={wp*1} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M8 N001 in1 vss vss NMOS l={ll} w={wn*1} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M11 vdd in2 N002 vdd PMOS l={ll} w={wp*1} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M12 N002 in2 vss vss NMOS l={ll} w={wn*1} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M13 vdd in2 N005 vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M14 N005 in2 vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M15 vdd in1 N008 vdd PMOS l={ll} w={wp*1} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M16 N008 in1 vss vss NMOS l={ll} w={wn*1} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
.lib BU_180nm.lib
.param wn1={wn*3}
.param wp2={wp*3}
.ends xor

.model NMOS NMOS
.model PMOS PMOS
.lib C:\users\lyam\Documents\LTspiceXVII\lib\cmp\standard.mos
.param vv=1.8 nnw=180n mp=1 ll=180n
.lib BU_180nm.lib
.op
.dc va 0 7 0.01
.lib Bin2Dec.sub
.lib Dec2Bin.sub
.backanno
.end
